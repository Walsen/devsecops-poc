# Test-only Dockerfile
FROM python:3.12-slim

WORKDIR /app

# Install uv
RUN pip install uv

# Copy dependency files
COPY pyproject.toml .

# Install all dependencies including test deps
RUN uv pip install --system --no-cache ".[dev]"

# Copy source and tests
COPY src/ ./src/
COPY tests/ ./tests/

ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

# Default test command
CMD ["pytest", "tests/", "-v", "--tb=short"]
